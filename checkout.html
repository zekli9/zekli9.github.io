<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout ‚Äì Zekli Store</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- Loader -->
    <div id="loader">
        <div class="loader-mascot">
            <img src="img/mini-mascot.png" alt="loading">
        </div>
        <div class="loader-text">Preparing Checkout... ‚ú®</div>
    </div>

    <!-- Background Particles -->
    <canvas id="bg-canvas"></canvas>

    <!-- Navbar -->
    <header class="navbar">
        <div class="logo">ZEKLI<span>STORE</span></div>
        <nav>
            <a href="index.html">Home</a>
            <a href="products.html">Products</a>
            <a href="custom-orders.html">Custom</a>
            <a href="contact.html">Contact</a>
            <a href="about.html">About</a>
            <a href="cart.html">Cart</a>
            <a href="checkout.html">Checkout</a>
        </nav>
    </header>

    <!-- Page Hero -->
    <section class="page-hero">
        <h1>Checkout</h1>
        <p>Almost done! Fill in your details to complete the order.</p>
    </section>

    <!-- Checkout Form -->
    <section class="page-content">
        <div class="page-section">
            <h2>üßæ Order Details</h2>

            <form class="form">

                <label>Your Name</label>
                <input type="text" id="uname" placeholder="Enter your name">

                <label>Your Address</label>
                <textarea id="uaddress" rows="3" placeholder="Full delivery address..."></textarea>

                <label>Your Phone Number</label>
                <input type="text" id="uphone" placeholder="WhatsApp number">

                <label>Extra Notes (Optional)</label>
                <textarea id="unote" rows="3" placeholder="e.g. Colour preference, size, custom request..."></textarea>

                <br><br>

                <!-- Payment Method -->
                <label>Select Payment Method</label>

                <div style="margin-top:6px; line-height: 2;">
                    <label style="cursor:pointer;">
                        <input type="radio" name="paymethod" value="UPI" checked>
                        <b>UPI (Preferred)</b> ‚Äì PhonePe / Google Pay / Paytm
                    </label>
                    <br>
                    <label style="cursor:pointer;">
                        <input type="radio" name="paymethod" value="Cash on Delivery">
                        <b>Cash on Delivery (COD)</b>
                    </label>
                </div>

                <br><br>

                <!-- WhatsApp Order Button -->
                <button type="button" class="btn-primary" onclick="sendCheckoutOrder()">
                    Place Order on WhatsApp
                </button>

            </form>
        </div>
    </section>

    <!-- WhatsApp Checkout Script -->
    <script>
        function sendCheckoutOrder() {
            let name = document.getElementById("uname").value.trim();
            let address = document.getElementById("uaddress").value.trim();
            let phone = document.getElementById("uphone").value.trim();
            let note = document.getElementById("unote").value.trim();

            // Payment Method
            let payMethod = document.querySelector("input[name='paymethod']:checked").value;

            if (name === "" || address === "" || phone === "") {
                alert("Please fill out all required details üíó");
                return;
            }

            // Load cart
            let cart = [];
            try {
                const stored = localStorage.getItem("zekliCart");
                if (stored) cart = JSON.parse(stored);
            } catch (e) { cart = []; }

            // Build cart summary
            let cartText = "";
            let total = 0;

            if (cart.length === 0) {
                cartText = "No items in cart.";
            } else {
                cart.forEach((item, i) => {
                    let price = parseFloat(item.price || "0");
                    total += price;

                    cartText += `${i + 1}. ${item.name} ‚Äì ‚Çπ${price}%0A`;
                });
            }

            let text =
                `Hello Zekli Store!%0A` +
                `I want to place an order.%0A%0A` +
                `üßç Name: ${name}%0A` +
                `üìû Phone: ${phone}%0A` +
                `üè† Address: ${address}%0A%0A` +
                `üí∞ Payment Method: ${payMethod}%0A%0A` +
                `üõí Cart Items:%0A${cartText}%0A` +
                `üî¢ Total Price: ‚Çπ${total}%0A%0A` +
                `üìù Notes: ${note}%0A%0A` +
                `Thank you!`;

            window.location.href = `https://wa.me/919855032677?text=${text}`;
        }
    </script>

    <!-- Footer -->
    <footer>
        <p>¬© 2025 Zekli Store ‚Ä¢ All rights reserved.</p>
    </footer>

    <!-- Assistant -->
    <div class="assistant">
        <img src="img/mini-mascot.png" class="assistant-img">
        <div class="assistant-bubble">Almost done! Choose payment method üíó</div>
    </div>

    <!-- JS -->
    <script src="script.js"></script>

</body>

</html>
